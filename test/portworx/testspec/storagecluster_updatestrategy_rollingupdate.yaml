kind: StorageCluster
apiVersion: core.libopenstorage.org/v1
metadata:
  name: "mycluster"
  namespace: kube-system
  annotations:
  labels:
    heritage: "Helm"
    release: "my-release"
    chart: "portworx-3.1.2"
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "my-release"
spec:
  image: portworx/oci-monitor:3.0.5
  imagePullPolicy: Always
  updateStrategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 3
      minReadySeconds: 30
  autoUpdateComponents: Always

  kvdb:
    internal: true
  storage:
    useAll: true
  secretsProvider: k8s
  
  stork:
    enabled: true
  monitoring:
    prometheus:
      enabled: true
      exportMetrics: true
      replicas: 1
      retention: 24h
    telemetry:
      enabled: true
  csi:
    enabled: true
  autopilot:
    enabled: true